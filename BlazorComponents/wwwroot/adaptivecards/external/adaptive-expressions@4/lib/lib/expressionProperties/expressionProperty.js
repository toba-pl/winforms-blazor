"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const expression_1=require(179);exports.ExpressionProperty=class{constructor(value,defaultValue){this.defaultValue=defaultValue,this.setValue(value)}toString(){return this.expressionText?`=${this.expressionText.replace(/^=/,"")}`:this.value?this.value.toString():""}toExpression(){if(this.expression)return this.expression;if(this.expressionText)return this.expression=expression_1.Expression.parse(this.expressionText.replace(/^=/,"")),this.expression;switch(typeof this.value){case"string":case"number":case"boolean":this.expression=expression_1.Expression.parse(this.value.toString());break;default:void 0===this.value?this.expression=expression_1.Expression.parse("undefined"):null===this.value?this.expression=expression_1.Expression.parse("null"):this.expression=expression_1.Expression.parse(`json(${JSON.stringify(this.value)})`)}return this.expression}getValue(data){const{value:value,error:error}=this.tryGetValue(data);if(error)throw error;return value}tryGetValue(data){if(!this.expression&&this.expressionText)try{this.expression=expression_1.Expression.parse(this.expressionText.replace(/^=/,""))}catch(error){return{value:void 0,error:error.message}}return this.expression?this.expression.tryEvaluate(data):{value:this.value,error:void 0}}setValue(value){this.value=this.defaultValue,this.expression=void 0,this.expressionText=void 0,"string"==typeof value?this.expressionText=value.replace(/^=/,""):value instanceof expression_1.Expression?(this.expression=value,this.expressionText=value.toString()):void 0!==value&&(this.value=value)}};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4cHJlc3Npb25Qcm9wZXJ0eS5qcyJdLCJuYW1lcyI6WyJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJ2YWx1ZSIsImV4cHJlc3Npb25fMSIsInJlcXVpcmUiLCJFeHByZXNzaW9uUHJvcGVydHkiLCJbb2JqZWN0IE9iamVjdF0iLCJkZWZhdWx0VmFsdWUiLCJ0aGlzIiwic2V0VmFsdWUiLCJleHByZXNzaW9uVGV4dCIsInJlcGxhY2UiLCJ0b1N0cmluZyIsImV4cHJlc3Npb24iLCJFeHByZXNzaW9uIiwicGFyc2UiLCJ1bmRlZmluZWQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsImVycm9yIiwidHJ5R2V0VmFsdWUiLCJtZXNzYWdlIiwidHJ5RXZhbHVhdGUiXSwibWFwcGluZ3MiOiJBQUFBLGFBQ0FBLE9BQU9DLGVBQWVDLFFBQVMsYUFBYyxDQUFFQyxPQUFPLElBUXRELE1BQU1DLGFBQWVDLFFBQVEsaUJBNkc3QkgsUUFBUUksbUJBeEdSLE1BTUlDLFlBQVlKLE1BQU9LLGNBQ2ZDLEtBQUtELGFBQWVBLGFBQ3BCQyxLQUFLQyxTQUFTUCxPQUtsQkksV0FDSSxPQUFJRSxLQUFLRSxtQkFDTUYsS0FBS0UsZUFBZUMsUUFBUSxLQUFNLE1BRTFDSCxLQUFLTixNQUFRTSxLQUFLTixNQUFNVSxXQUFhLEdBS2hETixlQUNJLEdBQUlFLEtBQUtLLFdBQ0wsT0FBT0wsS0FBS0ssV0FFaEIsR0FBSUwsS0FBS0UsZUFFTCxPQURBRixLQUFLSyxXQUFhVixhQUFhVyxXQUFXQyxNQUFNUCxLQUFLRSxlQUFlQyxRQUFRLEtBQU0sS0FDM0VILEtBQUtLLFdBR2hCLGNBQWVMLEtBQUtOLE9BQ2hCLElBQUssU0FDTCxJQUFLLFNBQ0wsSUFBSyxVQUNETSxLQUFLSyxXQUFhVixhQUFhVyxXQUFXQyxNQUFNUCxLQUFLTixNQUFNVSxZQUMzRCxNQUNKLGFBQ3VCSSxJQUFmUixLQUFLTixNQUNMTSxLQUFLSyxXQUFhVixhQUFhVyxXQUFXQyxNQUFNLGFBRTVCLE9BQWZQLEtBQUtOLE1BQ1ZNLEtBQUtLLFdBQWFWLGFBQWFXLFdBQVdDLE1BQU0sUUFHaERQLEtBQUtLLFdBQWFWLGFBQWFXLFdBQVdDLGNBQWNFLEtBQUtDLFVBQVVWLEtBQUtOLFdBSXhGLE9BQU9NLEtBQUtLLFdBU2hCUCxTQUFTYSxNQUNMLE1BQU1qQixNQUFFQSxNQUFLa0IsTUFBRUEsT0FBVVosS0FBS2EsWUFBWUYsTUFDMUMsR0FBSUMsTUFDQSxNQUFNQSxNQUVWLE9BQU9sQixNQU9YSSxZQUFZYSxNQUNSLElBQUtYLEtBQUtLLFlBQWNMLEtBQUtFLGVBQ3pCLElBQ0lGLEtBQUtLLFdBQWFWLGFBQWFXLFdBQVdDLE1BQU1QLEtBQUtFLGVBQWVDLFFBQVEsS0FBTSxLQUV0RixNQUFPUyxPQUNILE1BQU8sQ0FBRWxCLFdBQU9jLEVBQVdJLE1BQU9BLE1BQU1FLFNBR2hELE9BQUlkLEtBQUtLLFdBQ0VMLEtBQUtLLFdBQVdVLFlBQVlKLE1BRWhDLENBQUVqQixNQUFPTSxLQUFLTixNQUFPa0IsV0FBT0osR0FNdkNWLFNBQVNKLE9BQ0xNLEtBQUtOLE1BQVFNLEtBQUtELGFBQ2xCQyxLQUFLSyxnQkFBYUcsRUFDbEJSLEtBQUtFLG9CQUFpQk0sRUFDRixpQkFBVGQsTUFDUE0sS0FBS0UsZUFBaUJSLE1BQU1TLFFBQVEsS0FBTSxJQUVyQ1QsaUJBQWlCQyxhQUFhVyxZQUNuQ04sS0FBS0ssV0FBYVgsTUFDbEJNLEtBQUtFLGVBQWlCUixNQUFNVSxpQkFFYkksSUFBVmQsUUFDTE0sS0FBS04sTUFBUUEiLCJmaWxlIjoiL2hvbWUvdnN0cy93b3JrLzEvcy9saWJyYXJpZXMvYWRhcHRpdmUtZXhwcmVzc2lvbnMvbGliL2V4cHJlc3Npb25Qcm9wZXJ0aWVzL2V4cHJlc3Npb25Qcm9wZXJ0eS5qcyJ9